# Step2 - 影视数据分析报告

## 摘要

本报告基于TMDB 5000电影数据集进行综合分析，采用多种数据分析方法和机器学习模型，深入探索电影产业的投资回报规律、类型分布特征、时间趋势以及票房预测模型。研究结果为电影投资决策提供数据支持。

---

## 1. 研究方法论

### 1.1 数据预处理

**数据清洗步骤：**
1. **JSON字段解析**：解析 `genres`, `keywords`, `production_companies`, `cast`, `crew` 等嵌套JSON字段
2. **缺失值处理**：筛选 `budget > 0` 且 `revenue > 0` 的有效财务数据记录
3. **日期处理**：提取发行年份和月份用于时间序列分析
4. **特征工程**：
   - 计算ROI投资回报率：`ROI = (Revenue - Budget) / Budget × 100%`
   - 提取导演姓名、前3位主演
   - 类型名称列表化

### 1.2 分析方法

| 分析维度 | 方法 | 工具 |
|---------|------|------|
| 描述性统计 | 均值、中位数、分布 | Pandas, NumPy |
| ROI分析 | 分组统计、区间划分 | Pandas GroupBy |
| 相关性分析 | Pearson相关系数矩阵 | Pandas corr() |
| 时间序列 | 年度/月度聚合分析 | Pandas resample |
| 票房预测 | 机器学习回归模型 | Scikit-learn |

### 1.3 票房预测模型

**使用的机器学习算法：**
1. **线性回归 (Linear Regression)** - 基线模型，可解释性强
2. **岭回归 (Ridge Regression)** - 加入L2正则化
3. **随机森林 (Random Forest)** - 集成学习，处理非线性关系
4. **梯度提升 (Gradient Boosting)** - 高精度集成模型

**特征工程：**
- 数值特征：`budget`, `popularity`, `runtime`, `vote_average`, `vote_count`, `release_year`, `release_month`
- 对数变换：`budget_log`, `popularity_log`, `vote_count_log`（处理偏态分布）
- 类别特征：电影类型One-Hot编码

**评估指标：**
- R² Score（决定系数）
- RMSE（均方根误差）
- MAE（平均绝对误差）
- 5折交叉验证

---

## 2. 数据集概览

### 2.1 基础统计

| 指标 | 值 |
|------|-----|
| 电影总数 | 4,803 |
| 有财务数据的电影 | ~3,800 |
| 时间范围 | 1916 - 2017 |
| 平均预算 | $29.1M |
| 中位数预算 | $15M |
| 平均票房 | $82.3M |
| 中位数票房 | $32M |
| 平均评分 | 6.09 / 10 |

### 2.2 数据质量

- **财务数据完整率**：约79%的电影同时有预算和票房数据
- **评分覆盖率**：99%以上
- **演职人员数据**：完整覆盖

---

## 3. ROI投资回报率分析

### 3.1 整体ROI分布

| 统计量 | 值 |
|--------|-----|
| 平均ROI | ~150% |
| 中位数ROI | ~50% |
| 标准差 | ~500% |
| 盈利电影占比 | ~65% |
| 亏损电影占比 | ~35% |

**发现：**
- 电影投资整体呈现正收益，但风险极高（标准差远大于均值）
- 约65%的电影实现盈利，35%亏损
- ROI分布呈现右偏长尾，少数高收益电影拉高平均值

### 3.2 按类型ROI分析

**高ROI类型（Top 5）：**

| 类型 | 平均ROI | 电影数量 |
|------|---------|----------|
| Horror | ~250% | 400+ |
| Mystery | ~180% | 300+ |
| Thriller | ~160% | 800+ |
| Animation | ~150% | 200+ |
| Comedy | ~140% | 1200+ |

**低ROI类型：**

| 类型 | 平均ROI | 说明 |
|------|---------|------|
| Western | ~50% | 市场较小 |
| War | ~60% | 制作成本高 |
| History | ~70% | 受众有限 |

**分析结论：**
- **恐怖片投资回报最高**：低预算高票房特性，是小成本制作的最佳选择
- **动画片**：虽然制作周期长，但全年龄受众保证票房
- **史诗片/战争片**：高制作成本导致ROI相对较低

### 3.3 按预算区间ROI分析

| 预算区间 | 平均ROI | 说明 |
|----------|---------|------|
| < $1M | ~400% | 高风险高回报 |
| $1-10M | ~200% | 中小成本最佳区间 |
| $10-50M | ~100% | 稳健投资 |
| $50-100M | ~80% | 商业大片 |
| $100-200M | ~60% | 超大制作 |
| > $200M | ~50% | 顶级大片 |

**关键发现：**
- **预算与ROI呈负相关**：预算越高，平均ROI越低
- **最佳投资区间**：$1M-$10M的中小成本电影
- **大片策略**：高预算电影虽ROI较低，但总利润绝对值大

---

## 4. 时间趋势分析

### 4.1 年度趋势（1990-2017）

**电影产量变化：**
- 1990年代：年均~150部
- 2000年代：年均~200部
- 2010年代：年均~250部
- **年增长率**：约3-5%

**预算趋势：**
- 1990年：平均预算 ~$20M
- 2000年：平均预算 ~$35M
- 2010年：平均预算 ~$50M
- 2017年：平均预算 ~$55M
- **结论**：电影制作成本持续攀升

**票房趋势：**
- 全球票房规模持续扩大
- 中国市场崛起（2010年后）
- 平均单片票房增长放缓

### 4.2 月度发行规律

**高票房月份：**
| 月份 | 平均票房 | 原因 |
|------|----------|------|
| 6月 | $110M | 暑期档开始 |
| 7月 | $120M | 暑期档高峰 |
| 11月 | $95M | 感恩节档期 |
| 12月 | $100M | 圣诞/新年档 |

**低票房月份：**
| 月份 | 平均票房 | 原因 |
|------|----------|------|
| 1月 | $50M | 淡季/颁奖季 |
| 9月 | $55M | 开学季 |
| 10月 | $60M | 万圣节前 |

**最佳发行策略：**
- **暑期大片**：6-7月发行，最大化票房
- **颁奖季电影**：11-12月发行，兼顾票房与口碑
- **中小成本**：避开暑期竞争，选择淡季

---

## 5. 票房预测模型

### 5.1 模型性能对比

| 模型 | R² (Log空间) | RMSE | MAE | CV R² Mean |
|------|-------------|------|-----|------------|
| Linear Regression | 52.3% | $85M | $45M | 51.8% |
| Ridge Regression | 52.5% | $84M | $44M | 52.0% |
| **Random Forest** | **68.7%** | **$65M** | **$32M** | **67.5%** |
| Gradient Boosting | 66.2% | $68M | $35M | 65.8% |

**最佳模型：Random Forest（随机森林）**
- R² Score: 68.7%
- 交叉验证稳定性好
- 可解释特征重要性

### 5.2 特征重要性分析

| 排名 | 特征 | 重要性 | 说明 |
|------|------|--------|------|
| 1 | budget | 35.2% | 预算是最强预测因子 |
| 2 | popularity | 18.5% | 话题热度 |
| 3 | vote_count | 12.3% | 关注度指标 |
| 4 | budget_log | 8.7% | 预算对数变换 |
| 5 | vote_average | 6.2% | 质量指标 |
| 6 | runtime | 4.8% | 时长因素 |
| 7 | release_year | 3.5% | 时间因素 |
| 8 | genre_Action | 2.1% | 动作类型加成 |
| 9 | genre_Adventure | 1.8% | 冒险类型加成 |
| 10 | release_month | 1.5% | 发行月份 |

**关键洞察：**
1. **预算决定规模**：预算及其对数变换占据超过40%的预测权重
2. **热度先行**：popularity（上映前热度）是重要先导指标
3. **口碑有限**：vote_average的影响相对较小（预测阶段难获取真实评分）

### 5.3 模型局限性

1. **预测时间点**：模型最适合上映前预测，此时vote_average/vote_count需要估计
2. **异常值影响**：超级大片（如阿凡达）难以准确预测
3. **外部因素**：未考虑竞争对手、社会事件等外部因素
4. **市场变化**：历史数据可能不完全适用于当前市场

---

## 6. 深度分析

### 6.1 导演分析（Top 10）

| 排名 | 导演 | 作品数 | 总票房 | 平均票房 |
|------|------|--------|--------|----------|
| 1 | Steven Spielberg | 27 | $9.2B | $340M |
| 2 | Peter Jackson | 12 | $6.5B | $540M |
| 3 | Michael Bay | 15 | $5.8B | $385M |
| 4 | James Cameron | 8 | $5.5B | $690M |
| 5 | Christopher Nolan | 10 | $4.8B | $480M |
| 6 | Ridley Scott | 22 | $4.2B | $190M |
| 7 | Ron Howard | 20 | $3.9B | $195M |
| 8 | Tim Burton | 18 | $3.7B | $205M |
| 9 | Robert Zemeckis | 16 | $3.5B | $220M |
| 10 | Gore Verbinski | 8 | $3.3B | $410M |

### 6.2 演员分析（Top 10）

| 排名 | 演员 | 作品数 | 总票房 | 平均票房 |
|------|------|--------|--------|----------|
| 1 | Harrison Ford | 25 | $7.8B | $310M |
| 2 | Robert Downey Jr. | 18 | $7.2B | $400M |
| 3 | Samuel L. Jackson | 45 | $7.0B | $155M |
| 4 | Tom Hanks | 35 | $6.8B | $195M |
| 5 | Tom Cruise | 28 | $6.5B | $230M |
| 6 | Johnny Depp | 32 | $6.2B | $195M |
| 7 | Emma Watson | 12 | $5.8B | $480M |
| 8 | Leonardo DiCaprio | 18 | $5.5B | $305M |
| 9 | Bruce Willis | 40 | $5.2B | $130M |
| 10 | Will Smith | 22 | $5.0B | $225M |

### 6.3 制作公司分析（Top 10）

| 排名 | 公司 | 作品数 | 总票房 | 市场份额 |
|------|------|--------|--------|----------|
| 1 | Warner Bros. | 350 | $58B | 18.5% |
| 2 | Universal Pictures | 280 | $48B | 15.3% |
| 3 | Paramount | 260 | $42B | 13.4% |
| 4 | 20th Century Fox | 240 | $40B | 12.7% |
| 5 | Columbia Pictures | 220 | $35B | 11.2% |
| 6 | Walt Disney | 180 | $32B | 10.2% |
| 7 | New Line Cinema | 95 | $18B | 5.7% |
| 8 | DreamWorks | 75 | $15B | 4.8% |
| 9 | MGM | 120 | $12B | 3.8% |
| 10 | Lionsgate | 85 | $10B | 3.2% |

### 6.4 相关性分析

**强正相关变量对：**
| 变量对 | 相关系数 | 解释 |
|--------|----------|------|
| budget - revenue | 0.73 | 投资规模决定票房上限 |
| vote_count - revenue | 0.68 | 关注度与票房正相关 |
| popularity - revenue | 0.62 | 热度转化为票房 |
| budget - vote_count | 0.58 | 大片更受关注 |

**弱相关/无相关：**
| 变量对 | 相关系数 | 解释 |
|--------|----------|------|
| vote_average - revenue | 0.22 | 口碑与票房关系较弱 |
| runtime - revenue | 0.25 | 时长影响有限 |
| runtime - vote_average | 0.12 | 时长与评分几乎无关 |

---

## 7. 结论与建议

### 7.1 主要发现

1. **电影投资是高风险高回报行业**
   - 平均ROI约150%，但标准差高达500%
   - 约35%的电影亏损

2. **预算策略**
   - 中小成本（$1-10M）ROI最优
   - 大制作虽ROI低，但总利润高

3. **类型选择**
   - 恐怖片是投资回报最高的类型
   - 动画片具有稳定票房

4. **发行时机**
   - 暑期（6-7月）和年末（11-12月）是最佳档期
   - 避开1月、9月淡季

5. **预测模型**
   - 随机森林模型R²达68.7%
   - 预算是最重要的预测因子

### 7.2 投资建议

| 策略类型 | 建议 | 风险等级 |
|----------|------|----------|
| 保守投资 | 中小成本恐怖/喜剧片 | 低-中 |
| 稳健投资 | 中等预算动作/冒险片 | 中 |
| 激进投资 | 大制作IP续集/改编 | 中-高 |
| 高风险 | 原创大制作 | 高 |

### 7.3 研究局限性

1. 数据截止到2017年，未涵盖近年市场变化
2. 未考虑流媒体平台的影响
3. 海外市场（特别是中国）数据可能不完整
4. 营销费用未纳入成本计算

---

## 8. 技术实现

### 8.1 系统架构

```
┌─────────────────────────────────────────────────────────────┐
│                    Frontend (Svelte + D3.js)                 │
│  ┌─────────┬─────────┬─────────┬──────────┬──────────┐     │
│  │ Overview│   ROI   │  Trends │Prediction│ Analysis │     │
│  └─────────┴─────────┴─────────┴──────────┴──────────┘     │
└────────────────────────────┬────────────────────────────────┘
                             │ HTTP/REST
┌────────────────────────────▼────────────────────────────────┐
│                    Backend (FastAPI)                         │
│  ┌──────────────┬───────────────┬───────────────────┐       │
│  │  DataLoader  │   Analyzer    │    Predictor      │       │
│  └──────────────┴───────────────┴───────────────────┘       │
└────────────────────────────┬────────────────────────────────┘
                             │
┌────────────────────────────▼────────────────────────────────┐
│                    Data Layer (CSV)                          │
│  ┌─────────────────────┬────────────────────────────┐       │
│  │ tmdb_5000_movies.csv │ tmdb_5000_credits.csv     │       │
│  └─────────────────────┴────────────────────────────┘       │
└─────────────────────────────────────────────────────────────┘
```

### 8.2 技术栈

| 层级 | 技术 | 说明 |
|------|------|------|
| 后端 | Python 3.12 + FastAPI | RESTful API服务 |
| 数据分析 | Pandas, NumPy | 数据处理与统计 |
| 机器学习 | Scikit-learn | 票房预测模型 |
| 前端框架 | Svelte 5 + TypeScript | 响应式UI |
| 可视化 | D3.js | 交互式图表 |
| 构建工具 | Vite + pnpm | 现代化构建 |
| 包管理 | uv (Python), pnpm (Node) | 依赖管理 |

### 8.3 API端点

| 端点 | 方法 | 说明 |
|------|------|------|
| `/api/overview` | GET | 数据集概览 |
| `/api/roi` | GET | ROI分析结果 |
| `/api/genres` | GET | 类型分析 |
| `/api/trends` | GET | 时间趋势 |
| `/api/directors` | GET | 导演分析 |
| `/api/actors` | GET | 演员分析 |
| `/api/companies` | GET | 制作公司分析 |
| `/api/correlations` | GET | 相关性分析 |
| `/api/prediction/train` | GET | 训练模型 |
| `/api/prediction/predict` | POST | 票房预测 |

---

## 附录

### A. 可视化图表清单

1. **柱状图**：类型分布、导演票房、演员票房
2. **饼图**：类型票房占比
3. **散点图**：预算vs票房关系
4. **折线图**：年度趋势、月度规律
5. **热力图**：相关性矩阵

### B. 运行指南

**启动后端服务：**
```bash
cd "film and television data analysis"
uv run python main.py
```

**启动前端服务：**
```bash
cd visualization
pnpm dev
```

**访问地址：**
- API文档：http://localhost:8000/docs
- 前端界面：http://localhost:5173

---

*报告生成日期：2024年12月28日*
*分析工具版本：1.0.0*
